name: 'Fetch Comments on Events'
description: 'Fetches and processes comments from GitHub Issues and Discussions.'
author: 'Your Name <your-email@example.com>'
inputs:
  issue_enable:
    description: 'Enable fetching issue comments'
    required: false
    default: 'false'
  discussion_enable:
    description: 'Enable fetching discussion comments'
    required: false
    default: 'false'
  category_id:
    description: 'Discussion category ID'
    required: false
  limit:
    description: 'Number of comments to fetch'
    required: false
    default: '10'
runs:
  using: 'composite'
  steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.x"

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
      shell: bash

    - name: Fetch comments
      run: python get_comments/fetch_comments.py
      shell: python
      env:
        GITHUB_TOKEN: ${{ github.token }}  # 使用 github.token
        ISSUE_ENABLE: ${{ inputs.issue_enable }}
        DISCUSSION_ENABLE: ${{ inputs.discussion_enable }}
        GITHUB_REPO: ${{ github.repository }}
        CATEGORY_ID: ${{ inputs.category_id }}
        LIMIT: ${{ inputs.limit }}
branding:
  icon: 'message-circle'
  color: 'orange'
